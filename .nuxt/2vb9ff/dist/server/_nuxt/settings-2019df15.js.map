{"version":3,"file":"settings-2019df15.js","sources":["../../../../../src/pages/settings.vue"],"sourcesContent":["<script setup>\r\nimport {ref} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nimport { useLoginStore } from '@/stores/login'\r\n\r\nconst store = useLoginStore()\r\nconst router = useRouter()\r\nconst wishToDelete = ref(false)\r\nconst passInput = ref()\r\nconst error = ref()\r\nif(!store.sharedEmail){\r\n  router.push('/')\r\n}\r\nfunction logout(){\r\n  store.sharedEmail = null\r\n  store.setLoginState(false)\r\n  router.push('/')\r\n}\r\n\r\nasync function confirmDelete(){\r\n  const {data} = useFetch('/api/deleteAccount',{\r\n    method:'POST',\r\n    body:{\r\n      password:passInput.value\r\n    }\r\n  })\r\n  if(data.value.errorMessage){\r\n    error.value = data.value.errorMesssage\r\n  } else {\r\n    router.push('/')\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div id=\"settings root\">\r\n    <v-btn \r\n      @click=\"logout\"\r\n      variant=\"tonal\"\r\n    >\r\n      Logout\r\n    </v-btn>\r\n    \r\n    <v-btn \r\n      @click=\"()=>wishToDelete = true\"\r\n      variant=\"tonal\"\r\n    >\r\n      Delete account\r\n    </v-btn>\r\n    <br>\r\n    <div v-if=\"wishToDelete\">\r\n      <v-text-field v-model=\"passInput\"/>\r\n      <br>\r\n      <div id=\"confirm-buttons\">\r\n        <v-btn \r\n          @click=\"confirmDelete\"\r\n          variant=\"tonal\"\r\n        >\r\n          Confirm Account Deleteion\r\n        </v-btn>\r\n        <v-btn \r\n          @click=\"()=>{wishToDelete = false}\"\r\n          variant=\"tonal\"\r\n        >\r\n          Cancel Account Deleteion\r\n        </v-btn>\r\n      </div>\r\n       \r\n      <br>\r\n      <div\r\n        v-if=\"error\"\r\n        class=\"error\"\r\n      >\r\n        {{ error }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\ninput{\r\n  border-style: solid;\r\n  border-color: rgb(53, 97, 114);\r\n  background-color: rgb(28, 47, 48);\r\n  border-radius: 5px;\r\n  text-align: center;\r\n}\r\n\r\n.v-btn{\r\n  margin: 10px;\r\n}\r\n\r\n#confirm-buttons{\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n#settings-root, button{\r\n  margin-top: 4dvh;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n#settings-root{\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n}\r\n\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAKA,UAAA,QAAA,cAAA;AACA,UAAA,SAAA,UAAA;AACA,UAAA,eAAA,IAAA,KAAA;AACA,UAAA,YAAA,IAAA;AACA,UAAA,QAAA,IAAA;AACA,QAAA,CAAA,MAAA,aAAA;AACA,aAAA,KAAA,GAAA;AAAA,IACA;AACA,aAAA,SAAA;AACA,YAAA,cAAA;AACA,YAAA,cAAA,KAAA;AACA,aAAA,KAAA,GAAA;AAAA,IACA;AAEA,mBAAA,gBAAA;AACA,YAAA,EAAA,KAAA,IAAA,SAAA,sBAAA;AAAA,QACA,QAAA;AAAA,QACA,MAAA;AAAA,UACA,UAAA,UAAA;AAAA,QACA;AAAA,MACA,GAAA,aAAA;AACA,UAAA,KAAA,MAAA,cAAA;AACA,cAAA,QAAA,KAAA,MAAA;AAAA,MACA,OAAA;AACA,eAAA,KAAA,GAAA;AAAA,MACA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}