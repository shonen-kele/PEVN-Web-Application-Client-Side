import{_ as w,l as E,m as L,r as p,e as v,o as u,c as B,j as f,i as o,k as S,t as N,p as j,f as _,u as h,q as T,s as I,v as P,h as U}from"./entry.1a38f8fd.js";import{u as V}from"./fetch.afb6cea4.js";const O={__name:"authenticationForm",props:{buttonText:String},emits:["functionEmit"],setup(r,{emit:g}){E(),L();const a=p(),i=p();function c(){g("functionEmit",a.value,i.value)}return(k,n)=>{const s=v("v-text-field"),l=v("v-btn"),x=v("v-form");return u(),B(x,null,{default:f(()=>[o(s,{name:"email",type:"email",placeholder:"email",modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=d=>a.value=d),cols:"20"},null,8,["modelValue"]),o(s,{type:"password",placeholder:"password",modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=d=>i.value=d),cols:"20"},null,8,["modelValue"]),o(l,{type:"button",onClick:n[2]||(n[2]=()=>{c()})},{default:f(()=>[S(N(r.buttonText),1)]),_:1})]),_:1})}}},$=w(O,[["__file","C:/Users/kmba2/Coding/Projects in coding/Yessay/client/src/components/special/authenticationForm.vue"]]);const A=r=>(I("data-v-8dfdf35f"),r=r(),P(),r),M={id:"login-register"},R={key:0,id:"login-form"},Y={key:1,id:"register-form"},q=A(()=>U("br",null,null,-1)),D=["text"],Z=["text"],z={__name:"authentication",setup(r){const g=j(),a=L(),i=E(),{setEmail:c,setToken:k,setLoginState:n}=a,s=p(),l=p();async function x(m,e){const{data:t}=await V("/api/login",{method:"POST",body:{email:m,password:e}},"$6NtFfgiLix");s.value=t.value.errorMessage,l.value=t.value.message,l.value?(console.log("before setToken",a.token,"the token value is",t.value.token),k(t.value.token),console.log("after set token",a.token),c(t.value.email),n(!0),g.push("/personal")):c(null)}async function d(m,e){console.log(m),console.log(e);const{data:t}=await V("/api/register",{method:"POST",body:{email:m,password:e}},"$CxZBrh17jO");s.value=t.value.errorMessage,l.value=t.value.Emit,l.value&&(k(t.value.token),c(t.value.email))}return(m,e)=>{const t=$,C=v("v-divider"),F=v("v-btn");return u(),_("div",M,[h(i).isLoginForm?(u(),_("div",R,[o(t,{buttonText:"login",onFunctionEmit:e[0]||(e[0]=(y,b)=>{x(y,b)})}),o(C,{vertical:""}),o(F,{onClick:e[1]||(e[1]=()=>h(i).isLoginForm=!1)},{default:f(()=>[S("Register")]),_:1})])):(u(),_("div",Y,[o(F,{onClick:e[2]||(e[2]=()=>h(i).isLoginForm=!0)},{default:f(()=>[S("Login")]),_:1}),o(C,{vertical:""}),o(t,{buttonText:"register",onFunctionEmit:e[3]||(e[3]=(y,b)=>{d(y,b)})})])),q,s.value?(u(),_("div",{key:2,class:"error",text:s.value},null,8,D)):T("v-if",!0),l.value?(u(),_("div",{key:3,text:s.value},null,8,Z)):T("v-if",!0)])}}},J=w(z,[["__scopeId","data-v-8dfdf35f"],["__file","C:/Users/kmba2/Coding/Projects in coding/Yessay/client/src/pages/authentication.vue"]]);export{J as default};
